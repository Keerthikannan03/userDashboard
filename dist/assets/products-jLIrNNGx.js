import{n as J}from"./nodata-CrGk8vIx.js";import{_ as M,G as R,h as r,i as T,p as H,c as w,a as e,b as s,d as B,w as a,r as n,F as K,e as O,u as Q,J as W,o as v,I as u,s as X,t as y}from"./index-BTqfTJMj.js";import{c as C}from"./storeApi-BZGVzZ7X.js";const Y={class:"d-flex justify-content-between align-items-center"},Z={class:"d-flex align-items-center"},tt={key:0,class:"row g-3 pb-2 overflow-y-auto",style:{height:"80vh"}},et={class:"col-3"},st={class:"col-9 py-2 px-3"},ot={class:"mb-1"},lt={class:"m-0"},at={class:"my-1"},nt={class:"mb-0 text-truncate"},dt={class:"d-flex flex-wrap flex-sm-column flex-row justify-start align-items-start ga-1 mt-auto"},rt={__name:"products",setup(ct){const{manageStore:V}=R(),L=W(),m=r([]),_=r(!0);r(!1);const f=r("");r("");const D=r(-1),i=r(!1),b=async()=>{await C("/products").then(t=>{m.value=t.data.products,m.value.length==0?_.value=!1:_.value=!0}).catch(t=>{console.log(t,"erasdasdasdror")})},j=async o=>{const t=`/products/search?q=${o}`;await C(t).then(d=>{m.value=d.data.products,m.value.length==0?_.value=!1:_.value=!0}).catch(d=>{console.log(d,"reeerwewew")})},x=r([]),N=(o,t)=>{x.value[t]=!0,console.log(o,"uid"),L.push({name:"viewproduct",params:{id:o}}).then(()=>{x.value[t]=!1}).catch(()=>{x.value[t]=!1})},h=r([]),S=async(o,t)=>{h.value[t]=!0;const d=`/products/${o}`;await C(d,{method:"delete"}).then(c=>{console.log(c,"response"),f.value="",i.value=!1,V(c,"Product"),b()}).catch(c=>{console.log(c,"error"),V(c,"Product")}).finally(()=>{h.value[t]=!1})},z=o=>{D.value=o,i.value=!0,console.log(i.value,"deleteDialog")};return T(f,o=>{(!o||o&&o.length==0)&&(console.log(o,"newVal"),b())}),H(()=>{b()}),(o,t)=>{const d=n("v-btn"),c=n("v-text-field"),P=n("v-divider"),k=n("v-img"),A=n("v-card-subtitle"),$=n("v-card-text"),I=n("v-card"),F=n("v-avatar"),U=n("v-list-item"),q=n("v-list"),E=n("v-card-actions"),G=n("v-dialog");return v(),w("div",null,[e("div",Y,[t[5]||(t[5]=e("h2",null,"Products Lists",-1)),s(d,{to:"/dashboard/products/addproduct",class:"text-none",color:"#1976d2"},{default:a(()=>t[4]||(t[4]=[u("Add Product")])),_:1})]),e("div",Z,[t[6]||(t[6]=e("span",{class:"me-2",style:{color:"#757575"}},"Filters:",-1)),s(c,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l),onInput:t[1]||(t[1]=l=>j(f.value)),density:"compact",placeholder:"Search","prepend-inner-icon":"mdi-magnify",style:{"max-width":"300px"},variant:"solo",clearable:"","hide-details":""},null,8,["modelValue"])]),s(P),_.value?(v(),w("div",tt,[(v(!0),w(K,null,O(m.value,(l,p)=>(v(),w("div",{key:l.id,class:"col-xxl-4 col-xl-6 col-lg-6"},[s(I,{hover:"",class:"d-flex card-list"},{default:a(()=>[e("div",et,[s(k,{src:l.images[0],width:"100%",height:"10px","min-height":"100%",contain:"",class:"border border-1 rounded-2 rounded-top-0 rounded-end-0 p-1"},null,8,["src"])]),e("div",st,[e("h6",ot,y(l.title),1),s(A,{class:"p-0"},{default:a(()=>[u(y(l.description),1)]),_:2},1024),s($,{class:"d-flex flex-wrap justify-content-between p-0 pt-2"},{default:a(()=>[e("div",null,[e("p",lt,[t[7]||(t[7]=e("span",{class:"text-muted"},"Price: ",-1)),e("span",null,y(l.price),1)]),e("p",at,[t[8]||(t[8]=e("span",{class:"text-muted"},"Brand: ",-1)),e("span",null,y(l.brand),1)]),e("p",nt,[t[9]||(t[9]=e("span",{class:"text-muted"},"Category: ",-1)),e("span",null,y(l.category),1)])]),e("div",dt,[s(d,{onClick:g=>N(l.id,p),loading:x.value[p],size:"small",color:"primary",variant:"text"},{default:a(()=>t[10]||(t[10]=[u("View")])),_:2},1032,["onClick","loading"]),s(d,{onClick:g=>z(p),size:"small",color:"red",variant:"text"},{default:a(()=>t[11]||(t[11]=[u("Delete")])),_:2},1032,["onClick"])])]),_:2},1024)])]),_:2},1024),D.value==p?(v(),B(G,{key:0,modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=g=>i.value=g),"max-width":"380",persistent:""},{default:a(()=>[s(I,{class:"rounded-1 p-1"},{default:a(()=>[s(q,{class:"pt-0"},{default:a(()=>[s(U,{class:"px-0",title:l.title,subtitle:l.description},{prepend:a(()=>[s(F,{class:"cursor-pointer border border-1",size:"50"},{default:a(()=>[s(k,{src:l.images[0]},null,8,["src"])]),_:2},1024)]),_:2},1032,["title","subtitle"])]),_:2},1024),s(P,{class:"mt-0 mb-4"}),e("div",null,[s($,{class:"py-0"},{default:a(()=>t[12]||(t[12]=[u(" Are you sure you want to delete this Item? ")])),_:1}),s(E,{class:"justify-content-between"},{default:a(()=>[s(d,{onClick:t[2]||(t[2]=g=>i.value=!1),density:"compact"},{default:a(()=>t[13]||(t[13]=[u("Cancel")])),_:1}),s(d,{onClick:g=>S(l.id,p),loading:h.value[p],density:"compact",color:"danger"},{default:a(()=>t[14]||(t[14]=[u("Delete")])),_:2},1032,["onClick","loading"])]),_:2},1024)])]),_:2},1024)]),_:2},1032,["modelValue"])):X("",!0)]))),128))])):(v(),B(k,{key:1,src:Q(J),width:"80%",class:"m-auto"},null,8,["src"]))])}}},vt=M(rt,[["__scopeId","data-v-64e2c943"]]);export{vt as default};
